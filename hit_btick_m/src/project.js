window.__require=function e(t,i,n){function c(a,o){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!o&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return c(t[a][1][e]||e)},h,h.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)c(n[a]);return c}({Ball:[function(e,t,i){"use strict";cc._RF.push(t,"830b0+qUMNKCbFncobFUIvw","Ball"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.gameCtl=e,this.node.position=cc.v2(540,550),this.getComponent(cc.RigidBody).linearVelocity=cc.v2(1e3,1e3)},onBeginContact:function(e,t,i){switch(i.tag){case 1:this.gameCtl.onBallContactBrick(t.node,i.node);break;case 2:this.gameCtl.onBallContactGround(t.node,i.node);break;case 3:this.gameCtl.onBallContactPaddle(t.node,i.node);break;case 4:this.gameCtl.onBallContactWall(t.node,i.node)}}}),cc._RF.pop()},{}],BrickLayout:[function(e,t,i){"use strict";cc._RF.push(t,"15969hgjNNBW7GjRUQIud49","BrickLayout"),cc.Class({extends:cc.Component,properties:{padding:0,spacing:0,cols:0,brickPrefab:cc.Prefab,bricksNumber:0},init:function(e){this.node.removeAllChildren(),this.bricksNumber=e;var t=this.brickPrefab.data,i=t.width;t.height;this.cols=parseInt(1080/(i+this.padding));var n=(1080%(i+this.padding)+this.padding)/2;this.node.width=this.node.width-n,this.node.x=n;for(var c=0;c<this.bricksNumber;c++){var s=cc.instantiate(this.brickPrefab);s.parent=this.node,s.x=+c%this.cols*(s.width+this.spacing)+s.width/2,s.y=-Math.floor(c/this.cols)*(s.height+this.spacing)-s.height/2;var a=function(e,t){return Math.floor(Math.random()*(t-e)+e)};s.getComponent("brickTemplate").init({type:a(1,100),HP:a(1,10),icon:a(0,5)})}}}),cc._RF.pop()},{}],GameCtl:[function(e,t,i){"use strict";cc._RF.push(t,"a05f6IJFgtALZUOsmVSeck5","GameCtl");var n=e("GameModel");cc.Class({extends:cc.Component,properties:{gameView:e("GameView"),ball:e("Ball"),paddle:e("Paddle"),brickLayout:e("BrickLayout"),overPanel:e("OverPanel")},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode===cc.KEY.back&&cc.director.end()}),this.physicsManager=cc.director.getPhysicsManager(),this.gameModel=new n,this.startGame()},init:function(){this.physicsManager.enabled=!0,this.gameModel.init(),this.gameView.init(this),this.ball.init(this),this.paddle.init(),this.brickLayout.init(this.gameModel.bricksNumber),this.overPanel.init(this)},startGame:function(){this.init()},pauseGame:function(){this.physicsManager.enabled=!1},resumeGame:function(){this.physicsManager.enabled=!0},pauseOrResumeGame:function(){this.overPanel.node.active||(this.physicsManager.enabled=!this.physicsManager.enabled,this.physicsManager.enabled||(console.log("\u6682\u505c\u5f39\u7a97\u8981\u5904\u6765"),this.overPanel.show(this.gameModel.score,0===this.gameModel.bricksNumber,1)))},stopGame:function(){this.physicsManager.enabled=!1,this.overPanel.show(this.gameModel.score,0===this.gameModel.bricksNumber)},onBallContactBrick:function(e,t){this.gameModel.addScore(1),this.gameModel.minusBrick(1),this.gameView.updateScore(this.gameModel.score);var i=t.children[1].getComponent(cc.Label).string;i<=1?(t.parent=null,this.gameModel.bricksNumber<=0&&this.stopGame()):t.children[1].getComponent(cc.Label).string=i-=1},onBallContactGround:function(e,t){this.stopGame()},onBallContactPaddle:function(e,t){},onBallContactWall:function(e,t){},onDestroy:function(){this.physicsManager.enabled=!1}}),cc._RF.pop()},{Ball:"Ball",BrickLayout:"BrickLayout",GameModel:"GameModel",GameView:"GameView",OverPanel:"OverPanel",Paddle:"Paddle"}],GameModel:[function(e,t,i){"use strict";cc._RF.push(t,"d57bc9QcXlFpJEBw1VkvedP","GameModel"),cc.Class({extends:cc.Component,properties:{score:0,bricksNumber:0},init:function(){this.score=0,this.bricksNumber=24},addScore:function(e){this.score+=e},minusBrick:function(e){this.bricksNumber-=e}}),cc._RF.pop()},{}],GameView:[function(e,t,i){"use strict";cc._RF.push(t,"3152d0yyTREAqW+xPGXJgb4","GameView"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,scene:"home"},init:function(e){this.gameCtl=e,this.scoreLabel.string="0"},returnHome:function(){cc.director.loadScene(this.scene)},updateScore:function(e){this.scoreLabel.string=e}}),cc._RF.pop()},{}],OverPanel:[function(e,t,i){"use strict";cc._RF.push(t,"4c092vPn2FO7oIXUv3S1nxD","OverPanel"),cc.Class({extends:cc.Component,properties:{resultLabel:cc.Label,scoreLabel:cc.Label,statusLabel:cc.Label},onLoad:function(){},init:function(e){this.gameCtl=e,this.node.active=!1},show:function(e,t,i){this.node.active=!0,this.scoreLabel.string=e+"",1===i?(this.resultLabel.string="PAUSE GAME!",this.statusLabel.string="continue"):(this.statusLabel.string="play again",this.resultLabel.string=t?"YOU WIN!":"YOU LOSE!")},onBtnRestart:function(){this.gameCtl.startGame()}}),cc._RF.pop()},{}],Paddle:[function(e,t,i){"use strict";cc._RF.push(t,"d0716pdijVH/a4Oocm5ESL9","Paddle"),cc.Class({extends:cc.Component,onLoad:function(){var e=this;this.node.parent.on("touchmove",function(t){var i=e.node.parent.convertToNodeSpace(t.getLocation()),n=cc.winSize,c=e.node,s=c.width;c.height;i.x>=n.width-s/2&&(i.x=n.width-s/2),i.x<=s/2&&(i.x=s/2),e.node.x=i.x})},init:function(){this.node.x=540}}),cc._RF.pop()},{}],StartView:[function(e,t,i){"use strict";cc._RF.push(t,"d281f1wURtE061OqjHbgb8x","StartView"),cc.Class({extends:cc.Component,properties:{scene:"game"},onLoad:function(){console.log("startSCene")},init:function(){},enterGame:function(){cc.director.loadScene(this.scene)},share:function(){alert("\u8981\u63a5\u5fae\u4fe1api\uff0c\u665a\u70b9\u505a")},ranKing:function(){alert("\u8981\u63a5\u5fae\u4fe1api\uff0c\u665a\u70b9\u505a")}}),cc._RF.pop()},{}],brickTemplate:[function(e,t,i){"use strict";cc._RF.push(t,"83e72wWG8BENbcRIDLWHAUk","brickTemplate"),cc.Class({extends:cc.Component,properties:{icon:cc.Sprite,type:0,HP:cc.Label},init:function(e){this.type=e.type;var t="";e.type<=90?(t=["element_blue_square","element_green_square","element_grey_square","element_purple_square","element_red_square","element_yellow_square"][e.icon],this.HP.string=e.HP):(e.HP=1,this.HP.string="",e.type<=96?t="buff_langch":(t="buff_paddle_width",this.icon.node.height=40)),cc.loader.loadRes(t,cc.SpriteFrame,function(e,i){e?console.log(e):this.icon.spriteFrame=cc.loader.getRes(t,cc.SpriteFrame)}.bind(this))}}),cc._RF.pop()},{}]},{},["GameCtl","GameModel","Ball","BrickLayout","GameView","OverPanel","Paddle","StartView","brickTemplate"]);