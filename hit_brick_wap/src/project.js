window.__require=function e(t,n,i){function o(s,l){if(!n[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var d="function"==typeof __require&&__require;if(!l&&d)return d(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}}var r=n[s]={exports:{}};t[s][0].call(r.exports,function(e){return o(t[s][1][e]||e)},r,r.exports,e,t,n,i)}return n[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({Ball:[function(e,t,n){"use strict";cc._RF.push(t,"830b0+qUMNKCbFncobFUIvw","Ball"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.gameCtl=e,this.node.position=cc.v2(540,550),this.getComponent(cc.RigidBody).linearVelocity=cc.v2(1e3,1e3)},onBeginContact:function(e,t,n){switch(n.tag){case 1:this.gameCtl.onBallContactBrick(t.node,n.node);break;case 2:this.gameCtl.onBallContactGround(t.node,n.node);break;case 3:this.gameCtl.onBallContactPaddle(t.node,n.node);break;case 4:this.gameCtl.onBallContactWall(t.node,n.node)}}}),cc._RF.pop()},{}],BlockList:[function(e,t,n){"use strict";cc._RF.push(t,"4af1d7mBtJIuYp0jntgvfdS","BlockList");var i=cc.Class({name:"Item",properties:{id:0,hp:1,iconSF:cc.Sprite}});cc.Class({extends:cc.Component,properties:{items:{default:[],type:i},itemPrefab:cc.Prefab},onLoad:function(){},init:function(e){this.EndlessGameCtl=e;var t=function(e,t){return Math.floor(Math.random()*(t-e)+e)};this.EndlessGameCtl.EndlessGameModel.level++;var n=this.node.width,i=this.itemPrefab.data,o=i.width;i.height;this.spacing=this.EndlessGameCtl.EndlessGameModel.BlockSpacing,this.cols=parseInt(n/(o+this.spacing));for(var c=(n-this.cols*(o+this.spacing)+this.spacing)/2,s=0;s<this.cols;++s){if(t(1,10)>3){var l=cc.instantiate(this.itemPrefab);this.node.addChild(l),l.x=s%this.cols*(l.width+this.spacing)+c+l.width/2,l.y=-Math.floor(s/this.cols)*(l.height+this.spacing)-l.height/2;var a=t(1,100);a<=80?a=0:a>80&&(a=1),l.getComponent("BlockTemplate").init({id:Date.now(),type:a,iconSF:t(1,5),hp:t(1,5)*this.EndlessGameCtl.EndlessGameModel.level})}}},randerCoord:function(){}}),cc._RF.pop()},{}],BlockTemplate:[function(e,t,n){"use strict";cc._RF.push(t,"fc134pKS75OvZIpTuj49tj2","BlockTemplate"),cc.Class({extends:cc.Component,properties:{id:0,type:0,hp:cc.Label,icon:cc.Sprite},init:function(e){this.id=e.id,this.type=e.type,this.hp.string=e.hp;var t=void 0;0!=this.type?(this.hp.string="",this.node.block_type="buff_1",t="buff_langch"):t=["element_blue_square","element_green_square","element_grey_square","element_purple_square","element_red_square","element_yellow_square"][e.iconSF],cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){e?console.log(e):this.icon.spriteFrame=t}.bind(this))}}),cc._RF.pop()},{}],BrickLayout:[function(e,t,n){"use strict";cc._RF.push(t,"9eb08L8KBtCp6Q0N6a4D8/v","BrickLayout"),cc.Class({extends:cc.Component,properties:{spacing:20,cols:0,brickPrefab:cc.Prefab,bricksNumber:0},init:function(e){this.node.removeAllChildren(),this.bricksNumber=e;var t=this.brickPrefab.data,n=t.width,i=(t.height,this.node.width);this.cols=parseInt(i/(n+this.spacing));for(var o=(i-this.cols*(n+this.spacing)+this.spacing)/2,c=0;c<this.bricksNumber;c++){var s=cc.instantiate(this.brickPrefab);s.parent=this.node,s.x=+c%this.cols*(s.width+this.spacing)+o+s.width/2,s.y=-Math.floor(c/this.cols)*(s.height+this.spacing)-s.height/2;var l=function(e,t){return Math.floor(Math.random()*(t-e)+e)},a=l(1,100);a=a<=90?0:a<=96?1:2,s.getComponent("brickTemplate").init({type:a,HP:l(1,10),icon:l(0,5)})}}}),cc._RF.pop()},{}],Common:[function(e,t,n){"use strict";cc._RF.push(t,"78084JF53VIq78WsRzamon8","Common"),t.exports={money:0,BGM:!0,musicEffect:!0,authorize:function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){var e={};wx.login({success:function(t){e.code=t.code}}),console.log(e);var t=wx.getSystemInfoSync(),n=t.screenWidth,i=t.screenHeight;console.log(t),wx.getSetting({success:function(t){if(console.log(t.authSetting),t.authSetting["scope.userInfo"])console.log("\u7528\u6237\u5df2\u6388\u6743"),wx.getUserInfo({success:function(t){console.log(t),e.userInfo=t.userInfo}});else{console.log("\u7528\u6237\u672a\u6388\u6743");var o=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:n,height:i,backgroundColor:"#00000000",color:"#ffffff",fontSize:20,textAlign:"center",lineHeight:i}});o.onTap(function(t){t.userInfo?(console.log("\u7528\u6237\u6388\u6743:",t),e.userInfo=t.userInfo,o.destroy()):console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743:",t)})}}})}},share:function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){wx.shareAppMessage({title:"\u6211\u9700\u8981\u4f60\u7684\u5e2e\u52a9,\u8d76\u7d27\u4e00\u8d77\u6765\u73a9\u6253\u7816\u5757\u5427~",imageUrl:"https://medio.ruraltech.cn/banner/wall-7.jpg",query:"nick=\u5c0f\u7ea2&gender=\u5973&city=\u5317\u4eac",success:function(e){console.log("\u5206\u4eab\u6210\u529f",e),wx.showShareMenu({withShareTicket:!0})},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25",e)}})}},rankList:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage({type:"open"})},setUserDate:function(e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage(e)}},cc._RF.pop()},{}],EndlessCtl:[function(e,t,n){"use strict";cc._RF.push(t,"de81a/PFtVC06b/SsCnwXt2","EndlessCtl");var i=e("./../model/EndlessGameModel"),o=e("../model/Common");cc.Class({extends:cc.Component,properties:{BlockList:e("BlockList"),GameOverPopue:cc.Prefab,Content:{default:null,type:cc.Node},ballLink:{default:null,type:cc.Sprite},NpcPrefabContainer:{default:null,type:cc.Node},NpcPrefab:{default:null,type:cc.Prefab},audioBall1:{type:cc.AudioClip,default:null},audioBlock:{type:cc.AudioClip,default:null},audioBuff1:{type:cc.AudioClip,default:null},dig_ui:{type:cc.Prefab,default:null},warnLine:{type:cc.Node,default:null}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.ballLink_y=this.ballLink.node.y,this.EndlessGameModel=new i,this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.touchStart(e)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)}.bind(this),this),this.BlockList.init(this)},update:function(e){this.EndlessGameModel.isMoveDown&&(this.EndlessGameModel.isMoveDown=!1,this.initBlock())},init:function(){this.EndlessGameModel.init(),this.NpcPrefabContainer.destroyAllChildren();var e=this.Content.children.findIndex(function(e,t,n){return"BlockScreen"===e._name});this.Content.children[e].destroyAllChildren(),this.BlockList.init(this)},initBlock:function(){var e=this,t=this.Content.children.findIndex(function(e,t,n){return"BlockScreen"===e._name});this.Content.maxHeight,this.EndlessGameModel.BlockWidth,this.EndlessGameModel.BlockSpacing;this.warnLine.active=!1,this.Content.children[t].height+this.Content.children[t].children[1].y<0?this.stopGame():(this.Content.children[t].height+this.Content.children[t].children[1].y>50&&this.Content.children[t].height+this.Content.children[t].children[1].y<=200&&(this.warnLine.active=!0),this.Content.children[t].children.forEach(function(t){t.y=t.y-(e.EndlessGameModel.BlockWidth+e.EndlessGameModel.BlockSpacing)}),this.BlockList.init(this))},touchStart:function(e){this.EndlessGameModel.isActive||(this.ballLink.enabled=!0,this.ballLink.node.setPosition(cc.v2(this.EndlessGameModel.LastNpcPositionX,this.ballLink_y)))},touchMove:function(e){if(!this.EndlessGameModel.isActive){var t=e.touch._point.x;this.ballLink.node.setRotation(t),this.ballLink.node.rotation<280&&this.ballLink.node.setRotation(280),this.ballLink.node.rotation>440&&this.ballLink.node.setRotation(440)}},touchEnd:function(e){!this.EndlessGameModel.isActive&&this.EndlessGameModel.isGame&&(this.EndlessGameModel.isActive=!0,this.ballLink.enabled=!1,this.schedule(function(){var e=cc.instantiate(this.NpcPrefab);e.getComponent("Npc").init(this),this.NpcPrefabContainer.addChild(e),e.setPosition(cc.v2(this.EndlessGameModel.LastNpcPositionX,this.ballLink_y));var t=e.getComponent(cc.RigidBody),n=-this.ballLink.node.rotation-270,i=100*Math.cos(.017453293*n),o=100*Math.sin(.017453293*n);t.linearVelocity=cc.v2(10*i,10*o)}.bind(this),.08,this.EndlessGameModel.NpcBall-1))},playSound:function(e){o.musicEffect&&cc.audioEngine.playEffect(e,!1)},onNpcBallContactBlock:function(e,t){if("buff_1"!==t.block_type){this.EndlessGameModel.addScore(10);var n=t.children[1].getComponent(cc.Label).string;t.children[0].getComponent(cc.Animation);this.playSound(this.audioBlock),n<=1?t.destroy():t.children[1].getComponent(cc.Label).string=n-=1}else this.onBuffbom(t)},onBuffbom:function(e){this.playSound(this.audioBuff1),this.EndlessGameModel.NpcBall++,this.EndlessGameModel.NpcBallSign++,e.destroy()},onNpcBallContactBorder:function(e,t){this.playSound(this.audioBall1)},onPause:function(){var e=this;console.log(this.node);var t=cc.director.getPhysicsManager();t.enabled=!1;var n=cc.instantiate(this.dig_ui);this.node.addChild(n),n.getComponent("popue_dig").show_dlg({hide:function(){t.enabled=!0},restart:function(){e.init()}})},stopGame:function(){var e=this;this.EndlessGameModel.isGame=!1;var t=cc.instantiate(this.GameOverPopue);this.node.addChild(t),t.getComponent("game_over_dig").show_dlg({restart:function(){e.init()},score:this.EndlessGameModel.score})},test:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{"../model/Common":"Common","./../model/EndlessGameModel":"EndlessGameModel",BlockList:"BlockList"}],EndlessGameCtl:[function(e,t,n){"use strict";cc._RF.push(t,"126c2WQ5SlHX5ZnmvHSP3u6","EndlessGameCtl");var i=e("./../model/EndlessGameModel"),o=e("../model/Common");cc.Class({extends:cc.Component,properties:{BlockList:e("BlockList"),GameOverPopue:cc.Prefab,Content:{default:null,type:cc.Node},ballLink:{default:null,type:cc.Sprite},NpcPrefab:{default:null,type:cc.Prefab},audioBall1:{type:cc.AudioClip,default:null},audioBlock:{type:cc.AudioClip,default:null},audioBuff1:{type:cc.AudioClip,default:null},dig_ui:{type:cc.Prefab,default:null},warnLine:{type:cc.Node,default:null}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.ballLink_y=this.ballLink.node.y,this.EndlessGameModel=new i,this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.touchStart(e)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.touchMove(e)}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEnd(e)}.bind(this),this),this.BlockList.init(this)},update:function(e){this.EndlessGameModel.isMoveDown&&(this.EndlessGameModel.isMoveDown=!1,this.initBlock())},init:function(){this.EndlessGameModel.init();var e=this.Content.children.findIndex(function(e,t,n){return"BlockScreen"===e._name});this.Content.children[e].destroyAllChildren(),this.BlockList.init(this)},initBlock:function(){var e=this,t=this.Content.children.findIndex(function(e,t,n){return"BlockScreen"===e._name});this.Content.maxHeight,this.EndlessGameModel.BlockWidth,this.EndlessGameModel.BlockSpacing;this.warnLine.active=!1,this.Content.children[t].height+this.Content.children[t].children[1].y<0?this.stopGame():(this.Content.children[t].height+this.Content.children[t].children[1].y>50&&this.Content.children[t].height+this.Content.children[t].children[1].y<=200&&(this.warnLine.active=!0),this.Content.children[t].children.forEach(function(t){t.y=t.y-(e.EndlessGameModel.BlockWidth+e.EndlessGameModel.BlockSpacing)}),this.BlockList.init(this))},touchStart:function(e){this.EndlessGameModel.isActive||(this.ballLink.enabled=!0,this.ballLink.node.setPosition(cc.v2(this.EndlessGameModel.LastNpcPositionX,this.ballLink_y)))},touchMove:function(e){if(!this.EndlessGameModel.isActive){var t=e.touch._point.x;this.ballLink.node.setRotation(t),this.ballLink.node.rotation<280&&this.ballLink.node.setRotation(280),this.ballLink.node.rotation>440&&this.ballLink.node.setRotation(440)}},touchEnd:function(e){!this.EndlessGameModel.isActive&&this.EndlessGameModel.isGame&&(this.EndlessGameModel.isActive=!0,this.ballLink.enabled=!1,this.schedule(function(){var e=cc.instantiate(this.NpcPrefab);e.getComponent("Npc").init(this),this.Content.addChild(e),e.setPosition(cc.v2(this.EndlessGameModel.LastNpcPositionX,this.ballLink_y));var t=e.getComponent(cc.RigidBody),n=-this.ballLink.node.rotation-270,i=100*Math.cos(.017453293*n),o=100*Math.sin(.017453293*n);t.linearVelocity=cc.v2(10*i,10*o)}.bind(this),.08,this.EndlessGameModel.NpcBall-1))},playSound:function(e){o.musicEffect&&cc.audioEngine.playEffect(e,!1)},onNpcBallContactBlock:function(e,t){if("buff_1"!==t.block_type){this.EndlessGameModel.addScore(10);var n=t.children[1].getComponent(cc.Label).string;t.children[0].getComponent(cc.Animation);this.playSound(this.audioBlock),n<=1?t.destroy():t.children[1].getComponent(cc.Label).string=n-=1}else this.onBuffbom(t)},onBuffbom:function(e){this.playSound(this.audioBuff1),this.EndlessGameModel.NpcBall++,this.EndlessGameModel.NpcBallSign++,e.destroy()},onNpcBallContactBorder:function(e,t){this.playSound(this.audioBall1)},onPause:function(){var e=this;console.log(this.node);var t=cc.instantiate(this.dig_ui);this.node.addChild(t),t.getComponent("popue_dig").show_dlg({hide:function(){},restart:function(){e.init()}})},stopGame:function(){var e=this;this.EndlessGameModel.isGame=!1;var t=cc.instantiate(this.GameOverPopue);this.node.addChild(t),t.getComponent("game_over_dig").show_dlg({restart:function(){e.init()},score:this.EndlessGameModel.score})},test:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{"../model/Common":"Common","./../model/EndlessGameModel":"EndlessGameModel",BlockList:"BlockList"}],EndlessGameModel:[function(e,t,n){"use strict";cc._RF.push(t,"928b1etDfJASIAoGZPoaMxU","EndlessGameModel"),cc.Class({extends:cc.Component,properties:{score:0,volume:1,level:0,isGame:!0,isActive:!1,isMoveDown:!1,NpcBall:1,NpcBallSign:0,blockNumber:0,LastNpcPositionX:0,BlockWidth:80,BlockSpacing:20},init:function(){this.score=0,this.volume=1,this.level=0,this.isGame=!0,this.isActive=!1,this.isMoveDown=!1,this.NpcBall=1},addScore:function(e){this.score+=e},minusBrick:function(e){this.bricksNumber-=e}}),cc._RF.pop()},{}],Footer:[function(e,t,n){"use strict";cc._RF.push(t,"bfb81DDsA9EP49XPnPVGe+8","Footer"),cc.Class({extends:cc.Component,properties:{EndlessGameCtl:e("../../controller/EndlessCtl")},onLoad:function(){},onBeginContact:function(e,t,n){"Npc"===n.node.name&&(console.log("\u78b0\u649e\u5230\u5e95\u90e8"),this.EndlessGameCtl.EndlessGameModel.NpcBallSign++,this.EndlessGameCtl.EndlessGameModel.NpcBallSign===this.EndlessGameCtl.EndlessGameModel.NpcBall&&(this.EndlessGameCtl.EndlessGameModel.isMoveDown=!0,this.EndlessGameCtl.EndlessGameModel.LastNpcPositionX=n.node.x,this.EndlessGameCtl.EndlessGameModel.NpcBallSign=0,this.EndlessGameCtl.EndlessGameModel.isActive=!1),n.node.destroy())}}),cc._RF.pop()},{"../../controller/EndlessCtl":"EndlessCtl"}],GameCtl:[function(e,t,n){"use strict";cc._RF.push(t,"a05f6IJFgtALZUOsmVSeck5","GameCtl");var i=e("GameModel"),o=e("./../model/Common");cc.Class({extends:cc.Component,properties:{gameView:e("GameView"),paddle:e("Paddle"),brickLayout:e("BrickLayout"),ball_NPC_Prefab:cc.Prefab,ball_NPC_Layout:cc.Node,audioBall1:{type:cc.AudioClip,default:null},audioBlock:{type:cc.AudioClip,default:null},audioBuff1:{type:cc.AudioClip,default:null},audioPadding:{type:cc.AudioClip,default:null},dig_ui:{type:cc.Prefab,default:null},GameOverPopue:{type:cc.Prefab,default:null}},onLoad:function(){this.gameModel=new i,this.startGame()},init:function(){cc.director.getPhysicsManager().enabled=!0,this.gameModel.init(),this.gameView.init(this),this.paddle.init(this),this.brickLayout.init(this.gameModel.bricksNumber),this.onAddBallNFC(1)},startGame:function(){this.init()},pauseGame:function(){var e=this,t=cc.instantiate(this.dig_ui);this.node.addChild(t),t.getComponent("popue_dig").show_dlg({hide:function(){cc.director.getPhysicsManager().enabled=!0},restart:function(){e.init()}}),cc.director.getPhysicsManager().enabled=!1},stopGame:function(){var e=this,t=cc.instantiate(this.GameOverPopue);if(this.node.addChild(t),t.getComponent("game_over_dig").show_dlg({restart:function(){e.init()},goHome:function(){cc.director.loadScene("home")},score:this.gameModel.score}),cc.sys.platform===cc.sys.WECHAT_GAME){var n=this.gameModel.score;wx.getOpenDataContext().postMessage({score:n,type:"updateMaxScore"})}},onBallContactBrick:function(e,t){if(0!=t.brick_type)return this.gameModel.bricksNumber<=0&&this.stopGame(),void this.onBuffbom(t);this.playSound(this.audioBlock),this.gameModel.addScore(10),this.gameModel.minusBrick(1),this.gameView.updateScore(this.gameModel.score);var n=t.children[1].getComponent(cc.Label).string,i=t.children[0].getComponent(cc.Animation);n<=1?(i.play("brick_burst"),i.on("stop",function(){t.destroy()},this)):t.children[1].getComponent(cc.Label).string=n-=1},onBuffbom:function(e){this.playSound(this.audioBuff1);var t=cc.moveTo(2,cc.v2(e.getPosition().x,600-this.node.height)),n=cc.callFunc(function(){e.destroy()},e),i=cc.sequence(t,n);e.runAction(i)},onBallContactGround:function(e,t){this.ball_NPC_Layout.childrenCount<=1&&this.stopGame(),e.destroy()},onBallContactPaddle:function(e,t){this.playSound(this.audioPadding)},onBallContactWall:function(e,t){this.playSound(this.audioBall1)},onDestroy:function(){},playSound:function(e){o.musicEffect&&cc.audioEngine.playEffect(e,!1)},onAddBallNFC:function(e){1===e&&this.ball_NPC_Layout.removeAllChildren();var t=cc.instantiate(this.ball_NPC_Prefab);t.parent=this.ball_NPC_Layout,t.getComponent("Ball").init(this)}}),cc._RF.pop()},{"./../model/Common":"Common",BrickLayout:"BrickLayout",GameModel:"GameModel",GameView:"GameView",Paddle:"Paddle"}],GameModel:[function(e,t,n){"use strict";cc._RF.push(t,"d57bc9QcXlFpJEBw1VkvedP","GameModel"),cc.Class({extends:cc.Component,properties:{isGame:!0,score:0,bricksNumber:0},init:function(){this.isGame=!0,this.score=0,this.bricksNumber=24},addScore:function(e){this.score+=e},minusBrick:function(e){this.bricksNumber-=e}}),cc._RF.pop()},{}],GameView:[function(e,t,n){"use strict";cc._RF.push(t,"ce44ema6LJAn45Mf/B6irlf","GameView"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label},init:function(){this.scoreLabel.string="0"},updateScore:function(e){this.scoreLabel.string=e}}),cc._RF.pop()},{}],Npc:[function(e,t,n){"use strict";cc._RF.push(t,"f434cIuxQpJk4YdDyT5C+Dg","Npc"),cc.Class({extends:cc.Component,properties:{EndlessGameCtl:e("EndlessGameCtl")},onLoad:function(){},init:function(e){this.EndlessGameCtl=e},onBeginContact:function(e,t,n){switch(n.tag){case 0:break;case 1:this.EndlessGameCtl.onNpcBallContactBorder(t.node,n.node);break;case 3:this.EndlessGameCtl.onNpcBallContactBlock(t.node,n.node)}}}),cc._RF.pop()},{EndlessGameCtl:"EndlessGameCtl"}],Paddle:[function(e,t,n){"use strict";cc._RF.push(t,"d0716pdijVH/a4Oocm5ESL9","Paddle"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.group="paddle",this.node.parent.on("touchmove",function(t){var n=e.node.parent.convertToNodeSpace(t.getLocation()),i=cc.winSize,o=e.node,c=o.width;o.height;n.x>=i.width-c/2&&(n.x=i.width-c/2),n.x<=c/2&&(n.x=c/2),e.node.x=n.x})},init:function(e){this.gameCtl=e,this.node.height=80,this.node.width=300,this.node.scaleX=1,this.node.scaleY=1,this.node.x=540},onBeginContact:function(e,t,n){n.node.brick_type&&this.gameCtl.gameModel.isGame&&(n.node.destroy(),1===n.node.brick_type&&this.gameCtl.onAddBallNFC(2),2===n.node.brick_type&&this.onWidePaddle())},onWidePaddle:function(){this.node.scaleX+=.05,this.node.scaleY+=.05}}),cc._RF.pop()},{}],StartView:[function(e,t,n){"use strict";cc._RF.push(t,"4f3eb2+kdxJG4cIF6Tnh5Ye","StartView");var i=e("./../../model/Common");cc.Class({extends:cc.Component,properties:{dig_ui:{type:cc.Prefab,default:null},wxSubContextViewBG:{type:cc.Node,default:null},wxSubContextView:{type:cc.Node,default:null}},onLoad:function(){i.authorize()},start:function(){this.initAction()},initAction:function(){this._isShowRank=!1,this.wxSubContextView.y=1920,this._showAction=cc.moveTo(.1,this.wxSubContextView.x,0),this._hideAction=cc.moveTo(.2,this.wxSubContextView.x,1920)},init:function(){},enterGame:function(e){cc.director.loadScene("tradition")},enterGameEndless:function(){cc.director.loadScene("endless")},share:function(){i.share()},ranking:function(){this._isShowRank=!this._isShowRank,this._isShowRank?(this.wxSubContextView.runAction(this._showAction),i.rankList()):this.wxSubContextView.runAction(this._hideAction)},setting:function(){Alert.show("\u656c\u8bf7\u671f\u5f85\uff01")},text:function(){Alert.show("\u656c\u8bf7\u671f\u5f85\uff01")}}),cc._RF.pop()},{"./../../model/Common":"Common"}],Summary:[function(e,t,n){"use strict";cc._RF.push(t,"d1178AYfK9OwqQkc+BIECT3","Summary"),cc.Class({extends:cc.Component,properties:{EndlessGameCtl:e("../../controller/EndlessCtl"),scoreLabel:{default:null,type:cc.Label},ballLenLabel:{default:null,type:cc.Label}},onLoad:function(){},update:function(){this.EndlessGameCtl.EndlessGameModel.isGame&&(this.scoreLabel.string=this.EndlessGameCtl.EndlessGameModel.score,this.ballLenLabel.string="+"+this.EndlessGameCtl.EndlessGameModel.NpcBall)}}),cc._RF.pop()},{"../../controller/EndlessCtl":"EndlessCtl"}],TraditionCtl:[function(e,t,n){"use strict";cc._RF.push(t,"c757ckipnRHloO3x8tFabfd","TraditionCtl");var i=e("./../model/GameModel"),o=e("./../model/Common");cc.Class({extends:cc.Component,properties:{gameView:e("GameView"),paddle:e("Paddle"),brickLayout:e("BrickLayout"),ball_NPC_Prefab:cc.Prefab,ball_NPC_Layout:cc.Node,audioBall1:{type:cc.AudioClip,default:null},audioBlock:{type:cc.AudioClip,default:null},audioBuff1:{type:cc.AudioClip,default:null},audioPadding:{type:cc.AudioClip,default:null},dig_ui:{type:cc.Prefab,default:null},GameOverPopue:{type:cc.Prefab,default:null}},onLoad:function(){this.gameModel=new i,this.startGame()},init:function(){cc.director.getPhysicsManager().enabled=!0,this.gameModel.init(),this.gameView.init(this),this.paddle.init(this),this.brickLayout.init(this.gameModel.bricksNumber),this.onAddBallNFC(1)},startGame:function(){this.init()},onPause:function(){var e=this,t=cc.director.getPhysicsManager(),n=cc.instantiate(this.dig_ui);t.enabled=!1,this.node.addChild(n),n.getComponent("popue_dig").show_dlg({hide:function(){t.enabled=!0},restart:function(){e.init()}})},gameOver:function(){var e=this;this.gameModel.isGame=!1;var t=cc.instantiate(this.GameOverPopue);if(this.node.addChild(t),t.getComponent("game_over_dig").show_dlg({restart:function(){e.init()},goHome:function(){cc.director.loadScene("home")},score:this.gameModel.score}),cc.sys.platform===cc.sys.WECHAT_GAME){var n=this.gameModel.score;wx.getOpenDataContext().postMessage({score:n,type:"updateMaxScore"})}},onBallContactBrick:function(e,t){if(0==t.brick_type){this.playSound(this.audioBlock),this.gameModel.addScore(10),this.gameModel.minusBrick(1),this.gameView.updateScore(this.gameModel.score);var n=t.children[1].getComponent(cc.Label).string,i=t.children[0].getComponent(cc.Animation);n<=1?(i.play("brick_burst"),i.on("stop",function(){t.destroy()},this)):t.children[1].getComponent(cc.Label).string=n-=1}else this.onBuffbom(t)},onBuffbom:function(e){this.playSound(this.audioBuff1);var t=cc.moveTo(2,cc.v2(e.getPosition().x,600-this.node.height)),n=cc.callFunc(function(){e.destroy()},e),i=cc.sequence(t,n);e.runAction(i)},onBallContactGround:function(e,t){console.log("\u89e6\u6478\u5230\u5e95\u90e8\u7684\u5224\u65ad",this.ball_NPC_Layout),this.ball_NPC_Layout.childrenCount<=1&&this.gameOver(),e.destroy()},onBallContactPaddle:function(e,t){this.playSound(this.audioPadding)},onBallContactWall:function(e,t){this.playSound(this.audioBall1)},onDestroy:function(){},playSound:function(e){o.musicEffect&&cc.audioEngine.playEffect(e,!1)},onAddBallNFC:function(e){1===e&&this.ball_NPC_Layout.removeAllChildren();var t=cc.instantiate(this.ball_NPC_Prefab);t.parent=this.ball_NPC_Layout,t.getComponent("Ball").init(this)},test:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{"./../model/Common":"Common","./../model/GameModel":"GameModel",BrickLayout:"BrickLayout",GameView:"GameView",Paddle:"Paddle"}],brickTemplate:[function(e,t,n){"use strict";cc._RF.push(t,"5a67fLpl45CfJ4ii142a2BQ","brickTemplate"),cc.Class({extends:cc.Component,properties:{icon:cc.Sprite,type:0,HP:cc.Label},init:function(e){this.type=e.type,this.node.brick_type=e.type;var t="";0==e.type?(t=["element_blue_square","element_green_square","element_grey_square","element_purple_square","element_red_square","element_yellow_square"][e.icon],this.HP.string=e.HP):(e.HP=1,this.HP.string="",1==e.type?(this.node.group="buff_1",t="buff_langch"):(this.node.group="buff_2",t="buff_paddle_width",this.icon.node.height=40)),cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){e?console.log(e):this.icon.spriteFrame=t}.bind(this))}}),cc._RF.pop()},{}],game_over_dig:[function(e,t,n){"use strict";cc._RF.push(t,"78b2clPQgZNiLjGGAyH3Sga","game_over_dig");var i=e("./../../model/Common");cc.Class({extends:cc.Component,properties:{mask:{type:cc.Node,default:null},mask_opacity:128,content:{type:cc.Node,default:null},score:{type:cc.Label,default:null},money:{type:cc.Label,default:null},callBack:null},onLoad:function(){},show_dlg:function(e){this.callBack=e,this.score.string=this.callBack.score;var t=Math.round(this.callBack.score/10);this.money.string="+"+t,i.money+=t,i.setUserDate({data:i.money,type:"updateMoney"}),this.node.active=!0,this.mask.opacity=0;var n=cc.fadeTo(.3,this.mask_opacity);this.mask.runAction(n),this.content.scale=0;var o=cc.scaleTo(.3,1).easing(cc.easeIn(.1));this.content.runAction(o)},hide_dlg:function(){var e=cc.fadeOut(.3);this.mask.runAction(e);var t=cc.scaleTo(.3,0).easing(cc.easeBackIn()),n=cc.callFunc(function(){this.node.active=!1,this.node.destroy()}.bind(this)),i=cc.sequence([t,n]);this.content.runAction(i)},onShare:function(){console.log("\u6e38\u620f\u5185\u5206\u4eab\u597d\u53cb"),i.share()},returnHome:function(){this.hide_dlg(),cc.director.loadScene("home")},reStart:function(){console.log("\u91cd\u65b0\u5f00\u59cb\u6e38\u620f"),this.callBack.restart(),this.hide_dlg()}}),cc._RF.pop()},{"./../../model/Common":"Common"}],popue_dig:[function(e,t,n){"use strict";cc._RF.push(t,"cb34ecOjjtPf5xEavRk5+t8","popue_dig");var i=e("./../../model/Common");cc.Class({extends:cc.Component,properties:{mask:{type:cc.Node,default:null},mask_opacity:128,content:{type:cc.Node,default:null},callBack:null},onLoad:function(){this.setBGM(),this.setMusic()},show_dlg:function(e){this.callBack=e,this.node.active=!0,this.mask.opacity=0;var t=cc.fadeTo(.3,this.mask_opacity);this.mask.runAction(t),this.content.scale=0;var n=cc.scaleTo(.3,1).easing(cc.easeIn(.1));this.content.runAction(n)},hide_dlg:function(){var e=cc.fadeOut(.3);this.mask.runAction(e);var t=cc.scaleTo(.3,0).easing(cc.easeBackIn()),n=cc.callFunc(function(){this.callBack.hide(),this.node.active=!1,this.node.destroy()}.bind(this)),i=cc.sequence([t,n]);this.content.runAction(i)},onShare:function(){console.log("\u6e38\u620f\u5185\u5206\u4eab\u597d\u53cb"),this.HomeBase.share()},returnHome:function(){cc.director.loadScene("home")},reStart:function(){this.callBack.restart(),this.hide_dlg()},changeBGM:function(){i.BGM=!i.BGM,this.setBGM()},setBGM:function(){var e="",t=["music/music","music/dismusic"],n=0;i.BGM?(n=1,e=t[0]):(n=0,e=t[1]),cc.audioEngine.setMusicVolume(n),cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e?console.log(e):cc.find("music",this.content).getComponent(cc.Sprite).spriteFrame=t}.bind(this))},changeMusic:function(){i.musicEffect=!i.musicEffect,this.setMusic()},setMusic:function(){var e="",t=["music/yl","music/disyl"],n=0;i.musicEffect?(n=1,e=t[0]):(n=0,e=t[1]),cc.audioEngine.setEffectsVolume(n),cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e?console.log(e):cc.find("musicEffect",this.content).getComponent(cc.Sprite).spriteFrame=t}.bind(this))}}),cc._RF.pop()},{"./../../model/Common":"Common"}]},{},["EndlessCtl","EndlessGameCtl","GameCtl","TraditionCtl","Common","EndlessGameModel","GameModel","BlockList","BlockTemplate","Footer","Npc","Summary","Ball","BrickLayout","GameView","Paddle","brickTemplate","StartView","game_over_dig","popue_dig"]);